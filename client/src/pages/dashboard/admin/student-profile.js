"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var jsx_runtime_1 = require("react/jsx-runtime");
var react_query_1 = require("@tanstack/react-query");
var wouter_1 = require("wouter");
var AdminLayout_1 = require("@/components/AdminLayout");
var card_1 = require("@/components/ui/card");
var badge_1 = require("@/components/ui/badge");
var button_1 = require("@/components/ui/button");
var lucide_react_1 = require("lucide-react");
var wouter_2 = require("wouter");
function StudentProfile() {
    var _a;
    var _b = (0, wouter_1.useRoute)("/dashboard/admin/students/:id"), match = _b[0], params = _b[1];
    var studentId = params === null || params === void 0 ? void 0 : params.id;
    var _c = (0, react_query_1.useQuery)({
        queryKey: ["/api/admin/students", studentId],
        enabled: !!studentId,
    }), student = _c.data, isLoading = _c.isLoading;
    if (isLoading) {
        return ((0, jsx_runtime_1.jsx)(AdminLayout_1.default, { children: (0, jsx_runtime_1.jsx)("div", { className: "flex items-center justify-center min-h-[400px]", children: (0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-primary" }) }) }));
    }
    if (!student) {
        return ((0, jsx_runtime_1.jsx)(AdminLayout_1.default, { children: (0, jsx_runtime_1.jsxs)("div", { className: "text-center py-12", children: [(0, jsx_runtime_1.jsx)("h2", { className: "text-2xl font-bold text-gray-900 mb-4", children: "\u00D6\u011Frenci Bulunamad\u0131" }), (0, jsx_runtime_1.jsx)("p", { className: "text-gray-600 mb-6", children: "Arad\u0131\u011F\u0131n\u0131z \u00F6\u011Frenci mevcut de\u011Fil." }), (0, jsx_runtime_1.jsx)(wouter_2.Link, { href: "/dashboard/admin/students", children: (0, jsx_runtime_1.jsxs)(button_1.Button, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowLeft, { className: "mr-2 h-4 w-4" }), "\u00D6\u011Frenci Listesine D\u00F6n"] }) })] }) }));
    }
    var formatDate = function (dateString) {
        if (!dateString)
            return "Belirtilmemi≈ü";
        return new Date(dateString).toLocaleDateString("tr-TR");
    };
    var calculateAge = function (dateOfBirth) {
        if (!dateOfBirth)
            return null;
        var today = new Date();
        var birthDate = new Date(dateOfBirth);
        var age = today.getFullYear() - birthDate.getFullYear();
        var monthDiff = today.getMonth() - birthDate.getMonth();
        if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
            age--;
        }
        return age;
    };
    return ((0, jsx_runtime_1.jsx)(AdminLayout_1.default, { children: (0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center space-x-4", children: [(0, jsx_runtime_1.jsx)(wouter_2.Link, { href: "/dashboard/admin/students", children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", size: "sm", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.ArrowLeft, { className: "mr-2 h-4 w-4" }), "Geri"] }) }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsxs)("h1", { className: "text-2xl font-bold text-gray-900", children: [student.firstName, " ", student.lastName] }), (0, jsx_runtime_1.jsx)("p", { className: "text-gray-600", children: "\u00D6\u011Frenci Profili" })] })] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Edit, { className: "mr-2 h-4 w-4" }), "D\u00FCzenle"] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 lg:grid-cols-3 gap-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "lg:col-span-2 space-y-6", children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.User, { className: "mr-2 h-5 w-5" }), "Ki\u015Fisel Bilgiler"] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: "space-y-4", children: (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-2 gap-4", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-500", children: "Ad" }), (0, jsx_runtime_1.jsx)("p", { className: "text-lg font-semibold", children: student.firstName })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-500", children: "Soyad" }), (0, jsx_runtime_1.jsx)("p", { className: "text-lg font-semibold", children: student.lastName })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-500", children: "Do\u011Fum Tarihi" }), (0, jsx_runtime_1.jsx)("p", { className: "text-lg", children: formatDate(student.dateOfBirth) }), student.dateOfBirth && ((0, jsx_runtime_1.jsxs)("p", { className: "text-sm text-gray-500", children: [calculateAge(student.dateOfBirth), " ya\u015F\u0131nda"] }))] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-500", children: "Kay\u0131t Tarihi" }), (0, jsx_runtime_1.jsx)("p", { className: "text-lg", children: formatDate(((_a = student.enrollmentDate) === null || _a === void 0 ? void 0 : _a.toString()) || null) })] })] }) })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: "mr-2 h-5 w-5" }), "Akademik Bilgiler"] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "space-y-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-500", children: "S\u0131n\u0131f" }), (0, jsx_runtime_1.jsx)("p", { className: "text-lg font-semibold", children: student.class.name })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-500", children: "Seviye" }), (0, jsx_runtime_1.jsxs)(badge_1.Badge, { variant: "secondary", children: ["Seviye ", student.class.level] })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-500", children: "Program T\u00FCr\u00FC" }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "outline", children: student.class.programType.name })] })] }), student.class.programType.description && ((0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-500", children: "Program A\u00E7\u0131klamas\u0131" }), (0, jsx_runtime_1.jsx)("p", { className: "text-gray-700", children: student.class.programType.description })] }))] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: "mr-2 h-5 w-5" }), "Veli Bilgileri"] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: student.parent ? ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-3", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-500", children: "Veli Ad\u0131" }), (0, jsx_runtime_1.jsx)("p", { className: "text-lg font-semibold", children: student.parent.name })] }), (0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("label", { className: "text-sm font-medium text-gray-500", children: "Kullan\u0131c\u0131 Ad\u0131" }), (0, jsx_runtime_1.jsx)("p", { className: "text-gray-700", children: student.parent.username })] }), (0, jsx_runtime_1.jsx)("div", { className: "pt-2", children: (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", size: "sm", className: "w-full", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Mail, { className: "mr-2 h-4 w-4" }), "Mesaj G\u00F6nder"] }) })] })) : ((0, jsx_runtime_1.jsxs)("div", { className: "text-center py-6", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: "mx-auto h-12 w-12 text-gray-400 mb-3" }), (0, jsx_runtime_1.jsx)("p", { className: "text-gray-500 mb-3", children: "Veli atanmam\u0131\u015F" }), (0, jsx_runtime_1.jsx)(button_1.Button, { variant: "outline", size: "sm", children: "Veli Ata" })] })) })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsx)(card_1.CardTitle, { children: "H\u0131zl\u0131 \u0130\u015Flemler" }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { className: "space-y-3", children: [(0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", className: "w-full justify-start", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Calendar, { className: "mr-2 h-4 w-4" }), "Devam Kay\u0131tlar\u0131"] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", className: "w-full justify-start", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.User, { className: "mr-2 h-4 w-4" }), "\u0130lerleme Raporlar\u0131"] }), (0, jsx_runtime_1.jsxs)(button_1.Button, { variant: "outline", className: "w-full justify-start", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: "mr-2 h-4 w-4" }), "Davran\u0131\u015F Notlar\u0131"] })] })] })] })] })] }) }));
}
exports.default = StudentProfile;
