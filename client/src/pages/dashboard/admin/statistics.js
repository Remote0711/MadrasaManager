"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = AdminStatistics;
var jsx_runtime_1 = require("react/jsx-runtime");
var react_query_1 = require("@tanstack/react-query");
var AdminLayout_1 = require("@/components/AdminLayout");
var card_1 = require("@/components/ui/card");
var badge_1 = require("@/components/ui/badge");
var lucide_react_1 = require("lucide-react");
function AdminStatistics() {
    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r, _s;
    var _t = (0, react_query_1.useQuery)({
        queryKey: ['/api/admin/statistics'],
    }), stats = _t.data, isLoading = _t.isLoading;
    if (isLoading) {
        return ((0, jsx_runtime_1.jsx)(AdminLayout_1.default, { children: (0, jsx_runtime_1.jsx)("div", { className: "flex items-center justify-center h-64", children: (0, jsx_runtime_1.jsx)("div", { className: "animate-spin rounded-full h-12 w-12 border-b-2 border-primary" }) }) }));
    }
    var getCurrentWeek = function () {
        var now = new Date();
        var start = new Date(now.getFullYear(), 0, 1);
        return Math.ceil(((now.getTime() - start.getTime()) / 86400000 + start.getDay() + 1) / 7);
    };
    return ((0, jsx_runtime_1.jsx)(AdminLayout_1.default, { children: (0, jsx_runtime_1.jsxs)("div", { className: "space-y-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "relative", children: [(0, jsx_runtime_1.jsx)("div", { className: "absolute inset-0 islamic-pattern" }), (0, jsx_runtime_1.jsx)("div", { className: "relative bg-gradient-to-r from-primary/5 via-secondary/5 to-primary/5 p-6 rounded-xl border border-primary/10", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center", children: [(0, jsx_runtime_1.jsxs)("div", { children: [(0, jsx_runtime_1.jsx)("h1", { className: "text-4xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent", children: "Kapsaml\u0131 \u0130statistikler" }), (0, jsx_runtime_1.jsxs)("p", { className: "text-muted-foreground mt-2 text-lg", children: [(0, jsx_runtime_1.jsx)("span", { className: "inline-block w-1 h-4 bg-primary/60 mr-2 rounded" }), "Okul y\u00F6netimi i\u00E7in detayl\u0131 istatistiksel veriler - Hafta ", getCurrentWeek()] }), (0, jsx_runtime_1.jsx)("p", { className: "text-sm text-muted-foreground arabic-text mt-2", children: "\u0628\u0650\u0633\u0652\u0645\u0650 \u0627\u0644\u0644\u064E\u0651\u0647\u0650 \u0627\u0644\u0631\u064E\u0651\u062D\u0652\u0645\u064E\u0670\u0646\u0650 \u0627\u0644\u0631\u064E\u0651\u062D\u0650\u064A\u0645\u0650" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-3xl font-bold text-primary", children: (stats === null || stats === void 0 ? void 0 : stats.totalUsers) || 0 }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-muted-foreground", children: "Toplam Kullan\u0131c\u0131" })] })] }) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6", children: [(0, jsx_runtime_1.jsx)(card_1.Card, { className: "islamic-card", children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: "p-6", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "flex-shrink-0", children: (0, jsx_runtime_1.jsx)(lucide_react_1.Users, { className: "h-8 w-8 text-primary" }) }), (0, jsx_runtime_1.jsx)("div", { className: "ml-5 w-0 flex-1", children: (0, jsx_runtime_1.jsxs)("dl", { children: [(0, jsx_runtime_1.jsx)("dt", { className: "text-sm font-medium text-muted-foreground truncate", children: "Toplam \u00D6\u011Fretmen" }), (0, jsx_runtime_1.jsx)("dd", { className: "text-lg font-medium", children: (stats === null || stats === void 0 ? void 0 : stats.totalTeachers) || 0 })] }) })] }) }) }), (0, jsx_runtime_1.jsx)(card_1.Card, { className: "islamic-card", children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: "p-6", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "flex-shrink-0", children: (0, jsx_runtime_1.jsx)(lucide_react_1.GraduationCap, { className: "h-8 w-8 text-primary" }) }), (0, jsx_runtime_1.jsx)("div", { className: "ml-5 w-0 flex-1", children: (0, jsx_runtime_1.jsxs)("dl", { children: [(0, jsx_runtime_1.jsx)("dt", { className: "text-sm font-medium text-muted-foreground truncate", children: "Aktif \u00D6\u011Frenci" }), (0, jsx_runtime_1.jsx)("dd", { className: "text-lg font-medium", children: (stats === null || stats === void 0 ? void 0 : stats.totalStudents) || 0 })] }) })] }) }) }), (0, jsx_runtime_1.jsx)(card_1.Card, { className: "islamic-card", children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: "p-6", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "flex-shrink-0", children: (0, jsx_runtime_1.jsx)(lucide_react_1.BookOpen, { className: "h-8 w-8 text-primary" }) }), (0, jsx_runtime_1.jsx)("div", { className: "ml-5 w-0 flex-1", children: (0, jsx_runtime_1.jsxs)("dl", { children: [(0, jsx_runtime_1.jsx)("dt", { className: "text-sm font-medium text-muted-foreground truncate", children: "Toplam S\u0131n\u0131f" }), (0, jsx_runtime_1.jsx)("dd", { className: "text-lg font-medium", children: (stats === null || stats === void 0 ? void 0 : stats.totalClasses) || 0 })] }) })] }) }) }), (0, jsx_runtime_1.jsx)(card_1.Card, { className: "islamic-card", children: (0, jsx_runtime_1.jsx)(card_1.CardContent, { className: "p-6", children: (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)("div", { className: "flex-shrink-0", children: (0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: "h-8 w-8 text-primary" }) }), (0, jsx_runtime_1.jsx)("div", { className: "ml-5 w-0 flex-1", children: (0, jsx_runtime_1.jsxs)("dl", { children: [(0, jsx_runtime_1.jsx)("dt", { className: "text-sm font-medium text-muted-foreground truncate", children: "Ortalama \u0130lerleme" }), (0, jsx_runtime_1.jsxs)("dd", { className: "text-lg font-medium", children: ["%", ((_a = stats === null || stats === void 0 ? void 0 : stats.studentProgress) === null || _a === void 0 ? void 0 : _a.averageProgress) || 0] })] }) })] }) }) })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { className: "islamic-card", children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center text-xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.UserCheck, { className: "mr-3 h-6 w-6 text-primary" }), "\u00D6\u011Fretmen Devam Durumu - Bug\u00FCn"] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-3 gap-4 mb-6", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-center p-4 bg-green-50 rounded-lg border border-green-200", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-green-600", children: ((_b = stats === null || stats === void 0 ? void 0 : stats.teacherAttendance) === null || _b === void 0 ? void 0 : _b.present) || 0 }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-green-700", children: "Geldi" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center p-4 bg-yellow-50 rounded-lg border border-yellow-200", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-yellow-600", children: ((_c = stats === null || stats === void 0 ? void 0 : stats.teacherAttendance) === null || _c === void 0 ? void 0 : _c.late) || 0 }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-yellow-700", children: "Ge\u00E7" })] }), (0, jsx_runtime_1.jsxs)("div", { className: "text-center p-4 bg-red-50 rounded-lg border border-red-200", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-red-600", children: ((_d = stats === null || stats === void 0 ? void 0 : stats.teacherAttendance) === null || _d === void 0 ? void 0 : _d.absent) || 0 }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-red-700", children: "Yok" })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "space-y-3", children: [(0, jsx_runtime_1.jsx)("h4", { className: "font-semibold text-sm text-muted-foreground uppercase tracking-wide", children: "Gelmi\u015F \u00D6\u011Fretmenler" }), (_f = (_e = stats === null || stats === void 0 ? void 0 : stats.teacherAttendance) === null || _e === void 0 ? void 0 : _e.presentList) === null || _f === void 0 ? void 0 : _f.map(function (teacher, index) { return ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between p-2 bg-muted/30 rounded", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: teacher.name }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center gap-2", children: [(0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: teacher.status === 'on_time' ? 'default' : 'secondary', children: teacher.status === 'on_time' ? 'Zamanında' : 'Geç' }), (0, jsx_runtime_1.jsx)("span", { className: "text-xs text-muted-foreground", children: teacher.arrivalTime })] })] }, index)); })] }), ((_g = stats === null || stats === void 0 ? void 0 : stats.teacherAttendance) === null || _g === void 0 ? void 0 : _g.absentList) && stats.teacherAttendance.absentList.length > 0 && ((0, jsx_runtime_1.jsxs)("div", { className: "space-y-3 mt-6", children: [(0, jsx_runtime_1.jsx)("h4", { className: "font-semibold text-sm text-muted-foreground uppercase tracking-wide", children: "Gelmeyen \u00D6\u011Fretmenler" }), stats.teacherAttendance.absentList.map(function (teacher, index) { return ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between p-2 bg-red-50 rounded border border-red-200", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-medium text-red-800", children: teacher.name }), (0, jsx_runtime_1.jsxs)("span", { className: "text-xs text-red-600", children: ["Beklenen: ", teacher.expectedTime] })] }, index)); })] }))] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { className: "islamic-card", children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center text-xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Award, { className: "mr-3 h-6 w-6 text-primary" }), "\u00D6\u011Frenci \u0130lerleme Da\u011F\u0131l\u0131m\u0131"] }) }), (0, jsx_runtime_1.jsxs)(card_1.CardContent, { children: [(0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between p-4 bg-green-50 rounded-lg border border-green-200", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Target, { className: "h-5 w-5 text-green-600 mr-2" }), (0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: "M\u00FCkemmel (%90+)" })] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xl font-bold text-green-600", children: ((_h = stats === null || stats === void 0 ? void 0 : stats.studentProgress) === null || _h === void 0 ? void 0 : _h.excellent) || 0 })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between p-4 bg-yellow-50 rounded-lg border border-yellow-200", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.TrendingUp, { className: "h-5 w-5 text-yellow-600 mr-2" }), (0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: "\u0130yi (%70-89)" })] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xl font-bold text-yellow-600", children: ((_j = stats === null || stats === void 0 ? void 0 : stats.studentProgress) === null || _j === void 0 ? void 0 : _j.good) || 0 })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex items-center justify-between p-4 bg-red-50 rounded-lg border border-red-200", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex items-center", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.AlertTriangle, { className: "h-5 w-5 text-red-600 mr-2" }), (0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: "Dikkat Gerekiyor (%70 alt\u0131)" })] }), (0, jsx_runtime_1.jsx)("div", { className: "text-xl font-bold text-red-600", children: ((_k = stats === null || stats === void 0 ? void 0 : stats.studentProgress) === null || _k === void 0 ? void 0 : _k.needsAttention) || 0 })] })] }), (0, jsx_runtime_1.jsx)("div", { className: "mt-6 p-4 bg-muted/30 rounded-lg", children: (0, jsx_runtime_1.jsxs)("div", { className: "text-center", children: [(0, jsx_runtime_1.jsxs)("div", { className: "text-2xl font-bold text-primary", children: ["%", ((_l = stats === null || stats === void 0 ? void 0 : stats.studentProgress) === null || _l === void 0 ? void 0 : _l.averageProgress) || 0] }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm text-muted-foreground", children: "Genel Ortalama \u0130lerleme" })] }) })] })] })] }), (0, jsx_runtime_1.jsxs)("div", { className: "grid grid-cols-1 lg:grid-cols-2 gap-6", children: [(0, jsx_runtime_1.jsxs)(card_1.Card, { className: "islamic-card", children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center text-xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.CalendarDays, { className: "mr-3 h-6 w-6 text-primary" }), "Haftal\u0131k \u0130statistikler"] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsxs)("div", { className: "space-y-4", children: [(0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: "Mevcut Hafta" }), (0, jsx_runtime_1.jsx)(badge_1.Badge, { variant: "outline", children: ((_m = stats === null || stats === void 0 ? void 0 : stats.weeklyStats) === null || _m === void 0 ? void 0 : _m.currentWeek) || getCurrentWeek() })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: "Planlanan Dersler" }), (0, jsx_runtime_1.jsx)("span", { className: "text-lg font-bold", children: ((_o = stats === null || stats === void 0 ? void 0 : stats.weeklyStats) === null || _o === void 0 ? void 0 : _o.lessonsPlanned) || 0 })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: "Tamamlanan Dersler" }), (0, jsx_runtime_1.jsx)("span", { className: "text-lg font-bold text-green-600", children: ((_p = stats === null || stats === void 0 ? void 0 : stats.weeklyStats) === null || _p === void 0 ? void 0 : _p.lessonsCompleted) || 0 })] }), (0, jsx_runtime_1.jsxs)("div", { className: "flex justify-between items-center", children: [(0, jsx_runtime_1.jsx)("span", { className: "font-medium", children: "Devam Oran\u0131" }), (0, jsx_runtime_1.jsxs)("span", { className: "text-lg font-bold text-primary", children: ["%", ((_q = stats === null || stats === void 0 ? void 0 : stats.weeklyStats) === null || _q === void 0 ? void 0 : _q.attendanceRate) || 0] })] })] }) })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { className: "islamic-card", children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center text-xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.Clock, { className: "mr-3 h-6 w-6 text-primary" }), "Son Aktiviteler"] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: "space-y-3", children: (_r = stats === null || stats === void 0 ? void 0 : stats.recentActivity) === null || _r === void 0 ? void 0 : _r.map(function (activity, index) { return ((0, jsx_runtime_1.jsxs)("div", { className: "flex items-start space-x-3 p-3 bg-muted/30 rounded-lg", children: [(0, jsx_runtime_1.jsx)("div", { className: "w-2 h-2 rounded-full mt-2 ".concat(activity.severity === 'success' ? 'bg-green-500' :
                                                        activity.severity === 'warning' ? 'bg-yellow-500' : 'bg-blue-500') }), (0, jsx_runtime_1.jsxs)("div", { className: "flex-1 min-w-0", children: [(0, jsx_runtime_1.jsx)("p", { className: "text-sm font-medium", children: activity.message }), (0, jsx_runtime_1.jsx)("p", { className: "text-xs text-muted-foreground", children: activity.timestamp })] })] }, index)); }) }) })] })] }), (0, jsx_runtime_1.jsxs)(card_1.Card, { className: "islamic-card", children: [(0, jsx_runtime_1.jsx)(card_1.CardHeader, { children: (0, jsx_runtime_1.jsxs)(card_1.CardTitle, { className: "flex items-center text-xl font-bold bg-gradient-to-r from-primary to-primary/70 bg-clip-text text-transparent", children: [(0, jsx_runtime_1.jsx)(lucide_react_1.BookOpen, { className: "mr-3 h-6 w-6 text-primary" }), "Program T\u00FCrleri Da\u011F\u0131l\u0131m\u0131"] }) }), (0, jsx_runtime_1.jsx)(card_1.CardContent, { children: (0, jsx_runtime_1.jsx)("div", { className: "grid grid-cols-1 md:grid-cols-3 gap-4", children: (_s = stats === null || stats === void 0 ? void 0 : stats.programTypes) === null || _s === void 0 ? void 0 : _s.map(function (program, index) { return ((0, jsx_runtime_1.jsxs)("div", { className: "text-center p-6 bg-muted/30 rounded-lg border border-primary/20", children: [(0, jsx_runtime_1.jsx)("div", { className: "text-2xl font-bold text-primary", children: program.studentCount }), (0, jsx_runtime_1.jsx)("div", { className: "text-sm font-medium", children: program.name }), (0, jsx_runtime_1.jsx)("div", { className: "text-xs text-muted-foreground", children: "\u00F6\u011Frenci" })] }, index)); }) }) })] })] }) }));
}
